<div class="dropdowns-container">
  <button class="neu-button primary" style="margin-bottom: 30px;" (click)="openAddVideoDialog()">‚ûï Cadastrar Novo V√≠deo</button>

  @for (category of videoCategories(); track category.id) {
    <div class="dropdown-item" 
         (mouseenter)="hoveredCategory = category.id!" 
         (mouseleave)="hoveredCategory = null">
      
      <div class="dropdown-header neu-container" [class.active]="openedDropdown === category.id" (click)="toggleDropdown(category.id!)">
        <div class="header-content">
          <h3 class="category-title">{{ category.dropdownTitle }}</h3>

          <div class="header-info">
            <span class="video-count">{{ category.videos.length }} v√≠deos</span>
            
            <!-- √çcones aparecem ao passar mouse -->
            <div class="category-actions" *ngIf="hoveredCategory === category.id">
              <button class="icon-btn" (click)="openAddVideoDialog(category); $event.stopPropagation()">
                ‚úèÔ∏è
              </button>
              <button class="icon-btn" (click)="deleteCategory(category.id); $event.stopPropagation()">
                üóëÔ∏è
              </button>
            </div>

            <div class="dropdown-icon">
              <svg [class.rotated]="openedDropdown === category.id" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="dropdown-content" [class.active]="openedDropdown === category.id">
        <div class="videos-grid">
          @for (video of category.videos; track video.id) {
            <div class="video-card neu-container">
              <div class="video-thumbnail">
                <img [src]="getYouTubeThumbnail(video.youtubeUrl)" [alt]="video.videoTitle" (click)="openVideoDialog(video)" class="thumbnail-image">
                <div class="play-overlay">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                  </svg>
                </div>
              </div>

              <div class="video-info">
                <h4 class="video-title">{{ video.videoTitle }}</h4>
                <div class="video-meta">
                  <div class="meta-item">
                    <span>{{ video.created| date:'dd/MM/yyyy' }}</span>
                  </div>
                  <div class="meta-item">
                    <span class="sector-tag">{{ video.sector }}</span>
                  </div>
                </div>
                
                <button class="neu-button small watch-btn" (click)="openVideoDialog(video)">
                  ‚ñ∂Ô∏è Assistir
                </button>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  }
</div>
